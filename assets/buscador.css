@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap");

#lb-root{
  --bg:#ffffff; --soft:#F7F9FC; --text:#0F172A; --muted:#667085; --border:#E7ECF2;
  --primary:#0374C7; --primary-600:#026BB7; --primary-700:#015FA4; --primary-50:#E8F4FD;
  --ring:rgba(3,116,199,.22);
  --shadow-lg:0 20px 50px rgba(2,80,140,.12);
  --shadow-sm:0 10px 25px rgba(2,80,140,.08);
  --r:12px; --r-lg:18px; --h:44px; --anim:200ms; --anim-slow:340ms;
  --pad:12px; --gap:14px; --tabs-h:48px;
  color:var(--text);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  scrollbar-gutter:stable both-edges;
  overflow-x:hidden;


 --glass-blur: 56px;
  --glass-tint: 0;   
  --glass-dim: 0;   
}

#lb-root *{ box-sizing:border-box; font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif; }
#lb-root.lb-force-light{ color-scheme:light; }
body.lb-noscroll{ overflow:hidden; }
#lb-root .sr-only{ position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }

#lb-root .ico-18{ width:18px; height:18px; display:block; }
#lb-root .ico-16{ width:16px; height:16px; display:block; }

/* Scrollbar */
#lb-root *{ scrollbar-width:thin; scrollbar-color:#B6CCEC transparent; }
#lb-root *::-webkit-scrollbar{ height:10px; width:10px; }
#lb-root *::-webkit-scrollbar-thumb{ background:linear-gradient(180deg,#CFE1F9,#B6CCEC); border-radius:12px; }
#lb-root *::-webkit-scrollbar-track{ background:transparent; }

/* ================= Overlay + Panel ================= */
.lb-overlay{
  position:fixed; inset:0; display:grid; place-items:start center;
  z-index:2147483646; padding:22px 18px 24px;
  background: rgba(17,24,39,.45);
  -webkit-backdrop-filter: blur(8px) saturate(1.02);
  backdrop-filter: blur(8px) saturate(1.02);
}
.lb-overlay::before{
  content:""; position:fixed; inset:0; pointer-events:none;
  background:rgba(255,255,255,var(--glass-tint));
  -webkit-backdrop-filter:blur(calc(var(--glass-blur) * .85)) saturate(1.15) contrast(1.03);
  backdrop-filter:blur(calc(var(--glass-blur) * .85)) saturate(1.15) contrast(1.03);
}
.lb-overlay::after{
  content:""; position:fixed; inset:0; pointer-events:none;
  background:rgba(5,18,35,var(--glass-dim));
}

html:has(.lb-overlay){ overflow-y:hidden; }
body:has(.lb-overlay)::before{
  content:""; position:fixed; inset:0; z-index:2147483645;
  background:rgba(255,255,255,var(--glass-tint));
  -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(1.18) contrast(1.04);
  backdrop-filter:blur(var(--glass-blur)) saturate(1.18) contrast(1.04);
  pointer-events:none;
}

.lb-panel{
  z-index:2147483647; width:min(1120px,96vw); height:min(90dvh,960px);
  background:var(--bg); color:var(--text);
  border:1px solid var(--border); border-radius:var(--r-lg); box-shadow:var(--shadow-lg);
  overflow:hidden; display:grid; grid-template-rows:auto var(--tabs-h) 1fr auto; contain:content;
}
@media (max-width:900px){ #lb-root{ --tabs-h:44px; } }
@media (max-width:480px){ #lb-root{ --tabs-h:42px; } }

/* ================= Header ================= */
#lb-header{
  display:flex; align-items:center; gap:12px; padding:12px 14px;
  border-bottom:1px solid var(--border);
  background:linear-gradient(180deg,rgba(255,255,255,.96),rgba(251,253,255,.96));
  position:sticky; top:0; z-index:5;
  -webkit-backdrop-filter:saturate(1.02); backdrop-filter:saturate(1.02);
}
.lb-title{ display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
.lb-close{
  margin-left:auto; width:34px; height:34px; border-radius:10px; border:1px solid var(--border);
  background:var(--bg); cursor:pointer; transition:transform var(--anim), box-shadow var(--anim), border-color var(--anim), background var(--anim);
  display:grid; place-items:center; line-height:1; font-size:18px;
}
.lb-close:hover{ transform:translateY(-1px); border-color:#d5dde6; box-shadow:0 8px 18px rgba(2,80,140,.12); }
.lb-close:focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring); }

/* ================= Tabs fila fija ================= */
.lb-tabs-row{ grid-row:2; height:100%; padding:0 14px; border-bottom:1px solid var(--border); background:transparent; overflow:hidden; }
@media (max-width:900px){ .lb-tabs-row{ padding:0 12px; } }
.lb-tabs-h{
  height:100%; display:flex; align-items:center; gap:8px; white-space:nowrap;
  overflow-x:auto; overflow-y:hidden; padding:0; scrollbar-gutter:stable; overscroll-behavior-x:contain; touch-action:pan-x; contain:layout paint size;
}
.lb-tabs-h::-webkit-scrollbar{ height:8px; }
.lb-tabs-h::-webkit-scrollbar-thumb{ background:#cfe1f9; border-radius:8px; }
.lb-tab{
  flex:0 0 auto; display:inline-flex; align-items:center; justify-content:center;
  background:var(--primary); color:#fff; border:1px solid var(--primary);
  box-shadow:0 6px 14px rgba(3,116,199,.16); font-weight:800; line-height:1; margin-right:8px;
  min-height:34px; padding:8px 12px; border-radius:12px; transition:box-shadow var(--anim), background var(--anim), border-color var(--anim); cursor:pointer;
}
.lb-tab:last-child{ margin-right:0; }
.lb-tab:hover{ box-shadow:0 8px 18px rgba(3,116,199,.22); }
.lb-tab:focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring); }
.lb-tab.active{ background:var(--primary-600); border-color:var(--primary-600); }
@media (max-width:900px){ .lb-tab{ min-height:34px; padding:8px 10px; font-size:.95rem; } }
@media (max-width:480px){ .lb-tab{ min-height:32px; padding:7px 10px; font-size:.9rem; } }

/* ================= Layout ================= */
.lb-main{
  grid-row:3; display:grid; grid-template-columns:minmax(0,1fr) 380px; gap:var(--gap);
  align-items:stretch; height:100%; min-height:0; overflow:hidden; overscroll-behavior:contain; padding:12px 14px 14px;
}
@media (max-width:1200px){ .lb-main{ grid-template-columns:minmax(0,1fr) 340px; } }
@media (max-width:900px){ .lb-main{ grid-template-columns:1fr; gap:12px; padding:12px; } }

/* Centro */
.lb-left{
  position:relative; z-index:3; isolation:isolate; min-width:0; display:flex; flex-direction:column; height:100%; min-height:0; overflow:visible;
}
.lb-left-body{
  margin-top:12px; flex:1 1 auto; min-height:0;
  overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch;
  padding-right:4px; padding-bottom:10px; overscroll-behavior:contain; touch-action:pan-y; scrollbar-gutter:stable;
}

.lb-left-body:has(.lb-empty):not(:has(.lb-results), :has(.lb-res), :has(.lb-sec)){ overflow:hidden; }

/* Filtros */
.lb-right{
  position:relative; z-index:1; isolation:isolate; min-width:0; height:100%;
  display:flex; flex-direction:column; min-height:0;
}
.lb-filters{
  flex:1 1 auto; min-height:0; height:100%;
  overflow-y:auto !important;
  overflow-x:hidden; display:flex; flex-direction:column; align-items:stretch; gap:12px;
  padding:0 8px 10px; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; touch-action:pan-y; scrollbar-gutter:stable;
}

/* ================= Buscador central ================= */
.lb-search{ margin-top:6px; overflow:visible; }
.lb-input-wrap{
  position:relative; height:var(--h); display:flex; align-items:center;
  background:var(--bg); border:1px solid var(--border); border-radius:12px;
  transition:border-color var(--anim), box-shadow var(--anim), transform var(--anim);
  outline:none !important;
}
.lb-input-wrap:focus-within{ border-color:var(--primary-600); box-shadow:0 0 0 6px var(--ring); transform:translateY(-1px); }
.lb-input-ico{ position:absolute; left:14px; top:50%; transform:translateY(-50%); pointer-events:none; }
.lb-input{
  flex:1 1 auto; height:calc(var(--h) - 2px); line-height:calc(var(--h) - 2px);
  padding-left:48px; padding-right:52px; border:0; background:transparent; color:var(--text);
  -webkit-appearance:none; appearance:none; outline:none !important;
}
.lb-input::placeholder{ color:#9AA6B2; }
.lb-clear{
  position:absolute; right:6px; top:50%; transform:translateY(-50%); width:32px; height:32px;
  border:0; border-radius:10px; background:transparent; color:#2563EB; display:grid; place-items:center; line-height:1; font-size:18px; cursor:pointer;
}
.lb-clear:hover{ background:rgba(3,116,199,.08); }
#lb-root input[type="search"]::-webkit-search-decoration,
#lb-root input[type="search"]::-webkit-search-cancel-button,
#lb-root input[type="search"]::-webkit-search-results-button,
#lb-root input[type="search"]::-webkit-search-results-decoration{ -webkit-appearance:none; appearance:none; display:none; }
#lb-root input[type="search"]::-ms-clear{ display:none; width:0; height:0; }

/* ================= Resultados ================= */
.lb-results{ display:grid; gap:10px; min-height:0; }
.lb-res{ background:var(--bg); border:1px solid var(--border); border-radius:14px; padding:12px; box-shadow:0 16px 30px rgba(2,80,140,.08); }
.lb-res-head{ font-weight:800; margin:0 0 6px; }
.lb-res-item{ display:grid; grid-template-columns:36px 1fr auto; gap:12px; align-items:center; padding:10px; border-radius:10px; }
.lb-res-item + .lb-res-item{ margin-top:6px; }
.lb-res-item:hover{ background:rgba(3,116,199,.06); }
.lb-res-icon{ width:36px; height:36px; display:grid; place-items:center; border-radius:10px; background:linear-gradient(135deg,#F3F8FF,#FFFFFF); border:1px solid #E6E8EB; overflow:hidden; }
.lb-res-name{ font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ================= Secciones + actividades ================= */
.lb-sec{ background:var(--bg); border:1px solid var(--border); border-radius:14px; margin:12px 0; box-shadow:0 18px 36px rgba(2,80,140,.08); }
.lb-sec-head{ display:grid; grid-template-columns:1fr auto auto; gap:10px; align-items:center; padding:14px 16px; cursor:pointer; }
.lb-sec-title{ font-weight:800; }
.lb-count{ background:var(--primary); color:#fff; border-radius:999px; height:26px; min-width:34px; display:grid; place-items:center; font-weight:800; box-shadow:0 8px 18px rgba(3,116,199,.18); }
.lb-sec-toggle{ height:36px; padding:8px 10px; border:1px solid var(--border); border-radius:12px; background:var(--bg); cursor:pointer; display:grid; place-items:center; transition:transform var(--anim), box-shadow var(--anim), border-color var(--anim), background var(--anim); }
.lb-sec-toggle img{ width:16px; height:16px; display:block; transition:transform var(--anim); }
.lb-sec.is-open .lb-sec-toggle img{ transform:rotate(180deg); }
.lb-sec-toggle:focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring); }
.lb-sec-body{ padding:0 12px; overflow:visible; }
.lb-act{ display:grid; grid-template-columns:36px 1fr auto; gap:12px; align-items:center; padding:10px; border-radius:12px; transition:background var(--anim), transform var(--anim); }
.lb-act + .lb-act{ margin-top:6px; }
.lb-act:hover{ background:rgba(3,116,199,.06); transform:translateY(-1px); }
.lb-act-icon{ width:36px; height:36px; display:grid; place-items:center; border-radius:10px; background:linear-gradient(135deg,#F3F8FF,#FFFFFF); border:1px solid #E6E8EB; overflow:hidden; }
#lb-root .lb-act-icon img, #lb-root .lb-res-icon img, #lb-root img.lb-act-img{
  width:20px !important; height:20px !important; max-width:100% !important; max-height:100% !important;
  object-fit:contain; display:block; aspect-ratio:1/1;
}
.lb-act-main .lb-act-sub{ font-size:.85rem; color:#6b7280; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ================= Botones ================= */
.lb-btn{ --bg:var(--bg); --fg:var(--text); --bd:var(--border); display:inline-flex; align-items:center; justify-content:center; gap:8px; cursor:pointer; background:var(--bg); color:var(--fg); border:1px solid var(--bd); border-radius:12px; padding:10px 12px; height:var(--h); font-weight:600; text-decoration:none; transition:transform var(--anim), box-shadow var(--anim), border-color var(--anim), background var(--anim); }
.lb-btn:hover{ transform:translateY(-1px); border-color:#d5dde6; box-shadow:0 8px 18px rgba(2,80,140,.10); }
.lb-btn-mini{ height:36px; padding:8px 10px; border-radius:10px; }

/* ================= Estados ================= */
.lb-empty,.lb-loading{ text-align:center; color:var(--muted); padding:18px; font-weight:600; }
.lb-loading::before{
  content:""; display:inline-block; width:18px; height:18px; margin-right:8px; vertical-align:-3px;
  border:2px solid #c8d7eb; border-top-color:var(--primary); border-radius:50%; animation:lb-spin 900ms linear infinite;
}
@keyframes lb-spin{ to{ transform:rotate(360deg); } }

.lb-empty{ display:grid; place-items:center; padding:22px; color:var(--muted); }
.lb-empty-card{
  width:100%; max-width:1000px; margin:10px auto 6px; padding:24px 22px;
  border:1px solid var(--border); border-radius:16px;
  background:linear-gradient(180deg,#ffffff,#fbfdff); box-shadow:var(--shadow-sm); text-align:center;
}
.lb-empty-ico{ width:56px; height:56px; margin:0 auto 10px; border-radius:14px; display:grid; place-items:center; background:linear-gradient(135deg,#F3F8FF,#FFFFFF); border:1px solid #E6E8EB; box-shadow:0 6px 18px rgba(2,80,140,.10); }
.lb-empty-title{ margin:6px 0 4px; font-weight:800; letter-spacing:.2px; color:var(--text); }
.lb-empty-text{ margin:0 0 10px; color:#566173; }
.lb-empty-actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; align-items:center; margin-top:8px; }
.lb-chip{
  display:inline-flex; align-items:center; justify-content:center; height:36px; padding:0 14px; line-height:1; white-space:nowrap;
  border-radius:999px; border:1px solid rgba(3,116,199,.25);
  background:linear-gradient(180deg,#fff,#fbfdff);
  color:var(--primary-700); font-weight:700; letter-spacing:.1px; cursor:pointer;
  transition:transform var(--anim), box-shadow var(--anim), border-color var(--anim), background var(--anim);
}
.lb-chip:hover{ background:var(--primary-50); border-color:var(--primary-600); transform:translateY(-1px); box-shadow:0 8px 18px rgba(3,116,199,.10); }
.lb-chip:focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring); }

/* ================= Acordeones filtros ================= */
#lb-root .ms-trigger::before, #lb-root .ms-trigger::after{ content:none !important; display:none !important; }
.ms{ position:relative; min-width:0; }
.ms-trigger{
  position:sticky; top:0; z-index:3; height:var(--h); width:100%; background:var(--bg); border:1px solid var(--border); border-radius:14px;
  padding:0 14px; display:flex; align-items:center; gap:10px; cursor:pointer; margin:6px 8px 0; background-clip:padding-box;
  transition:box-shadow var(--anim), border-color var(--anim), transform var(--anim), background var(--anim);
}
.ms-trigger:hover{ border-color:var(--primary-600); box-shadow:0 8px 20px rgba(3,116,199,.12); transform:translateY(-.5px); }
.ms-trigger:focus-visible{ outline:none; box-shadow:0 0 0 6px var(--ring); }
.ms-label{ font-weight:800; color:var(--primary-700); }
.ms-caret{ margin-left:auto; width:32px; height:32px; border:1px solid var(--border); border-radius:10px; background:var(--bg); display:grid; place-items:center; box-shadow:0 1px 0 rgba(2,80,140,.04); }
.ms-caret .ms-caret-img{ width:16px; height:16px; display:block; transition:transform var(--anim); }
.ms-trigger.is-open .ms-caret .ms-caret-img{ transform:rotate(180deg); }

.ms-panel{
  position:static; width:auto; margin:8px; margin-top:8px; background:var(--bg); border:1px solid var(--border); border-radius:14px;
  box-shadow:none; padding:10px; max-height:none; overflow:visible;
}
.ms-search{
  position:relative; margin:6px 6px 10px; height:var(--h); display:flex; align-items:center;
  background:var(--bg); border:1px solid var(--border); border-radius:12px;
  transition:border-color var(--anim), box-shadow var(--anim), transform var(--anim); outline:none !important;
}
.ms-search:focus-within{ border-color:var(--primary-600); box-shadow:0 0 0 6px var(--ring); transform:translateY(-1px); }
.ms-ico{ position:absolute; left:12px; top:50%; transform:translateY(-50%); pointer-events:none; }
.ms-input{
  flex:1 1 auto; height:calc(var(--h) - 2px); line-height:calc(var(--h) - 2px);
  padding-left:40px; padding-right:40px; border:0; background:transparent; color:var(--text);
  -webkit-appearance:none; appearance:none; outline:none !important;
}
.ms-input::placeholder{ color:#9AA6B2; }
.ms-input-clear, .ms-clear{ display:grid; place-items:center; line-height:1; }
.ms-input-clear{
  position:absolute; right:8px; top:50%; transform:translateY(-50%); width:28px; height:28px; border:0; border-radius:8px; background:transparent; color:#2563EB; font-size:16px; cursor:pointer;
}
.ms-input-clear:hover{ background:rgba(3,116,199,.08); }

.ms-list{ list-style:none; margin:0; padding:6px; display:grid; grid-auto-rows:minmax(36px,auto); grid-template-columns:1fr; gap:6px; }
.ms-item{ border-radius:12px; min-width:0; }
.ms-item:hover{ background:rgba(3,116,199,.06); }
.ms-check{ display:flex; align-items:center; gap:12px; padding:8px 10px; cursor:pointer; width:100%; }
.ms-check input{ accent-color:var(--primary); width:16px; height:16px; flex:0 0 auto; }
.ms-texts{ display:flex; flex-direction:column; min-width:0; }
.ms-title{ font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ms-sub{ font-size:.85rem; color:#6b7280; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ms-foot{ display:flex; align-items:center; justify-content:space-between; padding:6px 10px 2px; }
.ms-clear{
  --fg:var(--primary); --bd:rgba(3,116,199,.25);
  background:linear-gradient(180deg,#fff,#fbfdff); height:36px; border:1px solid var(--bd);
  border-radius:12px; padding:8px 10px; cursor:pointer; transition:transform var(--anim), box-shadow var(--anim), border-color var(--anim), background var(--anim); color:var(--fg);
}
.ms-clear:hover{ background:var(--primary-50); border-color:var(--primary-600); color:var(--primary-700); }
.ms-count{ color:#475467; font-weight:700; }

/* ================= Pie ================= */
.lb-foot{ grid-row:4; border-top:1px solid var(--border); background:linear-gradient(180deg,rgba(255,255,255,.96),rgba(251,253,255,.96)); padding:10px 14px; }
.lb-pager{ display:flex; gap:8px; flex-wrap:wrap; }

/* ================= Responsive ================= */
@media (max-width:480px){
  .lb-panel{ width:96vw; height:min(92dvh,960px); border-radius:16px; }
  .lb-input{ padding-left:44px; padding-right:46px; }
  .ms-search{ margin:6px 4px 10px; }
  .ms-panel{ margin:8px 6px; }
  .ms-trigger{ margin:6px 6px 0; }
}

/* Motion-safe */
@media (prefers-reduced-motion:reduce){
  #lb-root *{ transition:none !important; animation:none !important; }
}



/* Archivos de mod_folder: compacto + árbol punteado */
.lb-files { margin: 8px 0 12px 6px; }
.lb-files-wrap {
  padding: 4px 0 0 12px;
  border-left: 1px dashed #d7dee8;
}

.lb-file {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 6px;
  margin: 0 0 2px 0;
  border-radius: 8px;
  font-size: 13px;
  line-height: 1.25;
}
.lb-file:hover { background: #f7f9fc; }

.lb-file .lb-elbow {
  width: 12px;
  height: 1px;
  border-top: 1px dashed #d7dee8;
  display: inline-block;
  margin-right: 2px;
}

.lb-file-icon { width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; }
.lb-file-img  { width: 16px; height: 16px; object-fit: contain; opacity: .9; }

.lb-file-main { min-width: 0; }
.lb-file-link {
  color: #0b57d0;
  text-decoration: none;
  word-break: break-word;
}
.lb-file-link:hover { text-decoration: underline; }
/* Resultados: estructura flexible para que quepa el nombre largo */
.lb-res-item { display: grid; grid-template-columns: 40px 1fr auto; gap: 12px; align-items: center; }
.lb-res-main { min-width: 0; }
.lb-res-name { white-space: normal; word-break: break-word; }

/* Para resultados que son archivos (hijo de carpeta) */
.lb-res-name--file { display: flex; align-items: baseline; gap: .5ch; flex-wrap: wrap; }
.lb-res-parent { opacity: .78; font-weight: 600; }
.lb-res-sep { opacity: .5; }
.lb-res-file { font-size: 0.92rem; font-weight: 600; line-height: 1.15; }

/* Botón mini coherente */
.lb-btn.lb-btn-mini { padding: 6px 10px; border-radius: 10px; display: inline-flex; align-items: center; gap: 6px; }
